<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shelly Plug Steuerung</title>
</head>
<body>

    <h2>Shelly Plug Steuerung</h2>
    <button onclick="schalteShelly(true)">ðŸ”Œ Einschalten</button>
    <button onclick="schalteShelly(false)">ðŸ”Œ Ausschalten</button>

    <script>
        function schalteShelly(status) {
            const myHeaders = new Headers();
            myHeaders.append("Content-Type", "application/x-www-form-urlencoded");

            const raw = `id=e465b85d8cd8&turn=${status ? "on" : "off"}&channel=0&auth_key=MmU4OTRmdWlk4A4D429C1AEBBB620E5AA56C8C7E4BE74451AEA01AF818193E6B1FDBB5535AEE6C59824916283299`;

            const requestOptions = {
                method: "POST",
                headers: myHeaders,
                body: raw,
                redirect: "follow"
            };

            fetch("https://shelly-165-eu.shelly.cloud/device/relay/control/", requestOptions)
                .then((response) => response.json()) // JSON konvertieren
                .then((data) => alert("Shelly Antwort: " + JSON.stringify(data))) // Antwort anzeigen
                .catch((error) => alert("Fehler: " + error));
        }
    </script>

</body>
</html>
